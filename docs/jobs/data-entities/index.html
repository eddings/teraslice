<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Data Entities · Teraslice</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="A DataEntity is wrapper for data that can hold additional metadata properties without mutating the original data."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Data Entities · Teraslice"/><meta property="og:type" content="website"/><meta property="og:url" content="https://terascope.github.io/teraslice/"/><meta property="og:description" content="A DataEntity is wrapper for data that can hold additional metadata properties without mutating the original data."/><meta property="og:image" content="https://terascope.github.io/teraslice/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://terascope.github.io/teraslice/img/docusaurus.png"/><link rel="shortcut icon" href="/teraslice/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="stylesheet" href="/teraslice/css/copy-code-block.css"/><link rel="stylesheet" href="/teraslice/css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/teraslice/js/copy-code-block.js"></script><script src="/teraslice/js/scrollSpy.js"></script><link rel="stylesheet" href="/teraslice/css/main.css"/><script src="/teraslice/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/teraslice/"><img class="logo" src="/teraslice/img/logo.png" alt="Teraslice"/><h2 class="headerTitleWithLogo">Teraslice</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/teraslice/docs/overview" target="_self">Docs</a></li><li class=""><a href="/teraslice/docs/asset-bundles" target="_self">Assets</a></li><li class=""><a href="/teraslice/docs/packages" target="_self">Packages</a></li><li class=""><a href="https://github.com/terascope/teraslice" target="_self">GitHub</a></li><li class=""><a href="/teraslice/help" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Jobs</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/teraslice/docs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/terminology">Terminology</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/teraslice/docs/configuration/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/configuration/clustering-native">Native Clustering</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/configuration/clustering-k8s">Kubernetes Clustering</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Management APIs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/teraslice/docs/management-apis/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/management-apis/endpoints-json">JSON APIs</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/management-apis/endpoints-txt">TXT APIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Jobs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/types-of-operations">Types of Operations</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/builtin-operations">Built-in Operations</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/slices">Slices</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/teraslice/docs/jobs/data-entities">Data Entities</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/dead-letter-queue">Dead Letter Queue</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/development">Development</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/jobs/testing">Testing</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/packages">Packages</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/scripts">Scripts</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/releases">Releases</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/tests">Tests</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/e2e">End-to-End Tests</a></li><li class="navListItem"><a class="navItem" href="/teraslice/docs/development/contributing">Contributing</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Data Entities</h1></header><article><div><span><p>A DataEntity is wrapper for data that can hold additional metadata properties without mutating the original data.</p>
<p>Check out the <a href="/teraslice/docs/packages/utils/api/classes/dataentity">API docs</a> for more details.</p>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<h3><a class="anchor" aria-hidden="true" id="new-dataentity"></a><a href="#new-dataentity" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>new DataEntity</h3>
<p>This is more straightforward way of creating data entities but since <code>DataEntity.make</code> safely handles a <code>DataEntity</code> input and has potential performance improvements it is recommended to use that in production.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);
<span class="hljs-comment">// it is also available on job-components</span>
<span class="hljs-comment">// const { DataEntity } = require('@terascope/job-components');</span>

<span class="hljs-keyword">const</span> input = {
    <span class="hljs-attr">foo</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">bar</span>: <span class="hljs-string">'hello'</span>,
    <span class="hljs-attr">baz</span>: {
        <span class="hljs-attr">hi</span>: <span class="hljs-literal">true</span>
    }
};

<span class="hljs-keyword">const</span> metadata = {
    <span class="hljs-attr">from</span>: <span class="hljs-string">'test'</span>
}

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity(input, metadata);

<span class="hljs-comment">// the input should have been shallow cloned</span>
expect(dataEntity).not.toBe(input);
expect(dataEntity).toEqual(input);
expect(DataEntity.isDataEntity(input)).toBeFalse();
expect(DataEntity.isDataEntity(dataEntity)).toBeTrue();

<span class="hljs-comment">// should be able to set a time key key</span>
dataEntity.setTime(<span class="hljs-string">'_eventTime'</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-comment">// it will set the getTime field</span>
expect(dataEntity.getTime(<span class="hljs-string">'_eventTime'</span>)).toBeNumber();

<span class="hljs-comment">// should be able to convert it to a buffer</span>
expect(dataEntity.toBuffer()).toEqual(Buffer.from(<span class="hljs-built_in">JSON</span>.stringify(dataEntity)));
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentitymake"></a><a href="#dataentitymake" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity.make</h3>
<p>A utility for safely converting an object a <code>DataEntity</code>. If the input is a DataEntity it will return it and have no side-effect. If you want a create new DataEntity from an existing DataEntity either use <code>new DataEntity</code> or shallow clone the input before passing it to <code>DataEntity.make</code>.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> input = {
    <span class="hljs-attr">foo</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">bar</span>: <span class="hljs-string">'hello'</span>,
    <span class="hljs-attr">baz</span>: {
        <span class="hljs-attr">hi</span>: <span class="hljs-literal">true</span>
    }
};

<span class="hljs-keyword">const</span> dataEntity = DataEntity.make(input);
<span class="hljs-keyword">const</span> result = DataEntity.make(dataEntity);
expect(result).toBe(dataEntity);

<span class="hljs-comment">// the behavoir should be the same as new DataEntity.</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentitymakearray"></a><a href="#dataentitymakearray" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity.makeArray</h3>
<p>A utility for safely converting an input of an object, or an array of objects, to an array of DataEntities. This will detect if passed an already converted input and return it.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> input = [
    {
        <span class="hljs-attr">foo</span>: <span class="hljs-number">1</span>,
    },
    {
        <span class="hljs-attr">bar</span>: <span class="hljs-number">1</span>,
    }
];

<span class="hljs-keyword">const</span> dataEntities = DataEntity.makeArray(input);
expect(dataEntites).toBeArrayOfSize(<span class="hljs-number">2</span>);
expect(DataEntity.isDataEntityArray(dataEntities)).toBeTrue();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentityfork"></a><a href="#dataentityfork" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity.fork</h3>
<p>Create a new instance of a DataEntity. If the second param <code>withData</code> is set to <code>true</code> both the data and metadata will be forked, if set to <code>false</code> only the metadata will be copied. Defaults to <code>true</code>.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> input = {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>,
};

<span class="hljs-keyword">const</span> metadata = {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'hello'</span>
};

<span class="hljs-keyword">const</span> dataEntity = DataEntity.make(input, metadata);

<span class="hljs-comment">// this is the default behavior</span>
<span class="hljs-keyword">const</span> forkedWithData = DataEntity.fork(dataEntity, <span class="hljs-literal">true</span>);
expect(forkedWithData).not.toBe(dataEntity);
expect(forkedWithData).toHaveProperty(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>);
expect(forkedWithData.getKey()).toBe(<span class="hljs-string">'hello'</span>);

<span class="hljs-comment">// useful for create barebones instance with the same metadata</span>
<span class="hljs-keyword">const</span> forkedWithoutData = DataEntity.fork(dataEntity, <span class="hljs-literal">false</span>);
expect(forkedWithoutData).not.toBe(dataEntity);
expect(forkedWithoutData).not.toHaveProperty(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>);
expect(forkedWithData.getKey()).toBe(<span class="hljs-string">'hello'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentityfrombuffer"></a><a href="#dataentityfrombuffer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity.fromBuffer</h3>
<p>A utility for converting a <code>Buffer</code> to a <code>DataEntity</code>, using the DataEntity encoding.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> jsonBuffer = Buffer.from(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }));
<span class="hljs-keyword">const</span> dataEntity = DataEntity.fromBuffer(jsonBuffer, {
    <span class="hljs-comment">// defaults to json</span>
    _encoding: <span class="hljs-string">'json'</span>
});
expect(dataEntity).toHaveProperty(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>);

<span class="hljs-keyword">const</span> rawDataEntity = DataEntity.fromBuffer(jsonBuffer, {
    <span class="hljs-comment">// defaults to json</span>
    _encoding: <span class="hljs-string">'raw'</span>
});

expect(rawDataEntity).not.toHaveProperty(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>);
expect(rawDataEntity.getRawData().toString(<span class="hljs-string">'utf8'</span>)).toEqual(jsonBuffer.toString(<span class="hljs-string">'utf8'</span>))
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getmetadata"></a><a href="#dataentity-getmetadata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getMetadata</h3>
<p>Get the metadata for the DataEntity. If a field is specified, it will get that property of the metadata.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> metadata = {
    <span class="hljs-attr">from</span>: <span class="hljs-string">'test'</span>
}
<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, metadata);

expect(dataEntity.getMetadata()).toMatchObject(metadata);
expect(dataEntity.getMetadata(<span class="hljs-string">'_createTime'</span>)).toBeNumber();
expect(dataEntity.getMetadata(<span class="hljs-string">'from'</span>)).toEqual(<span class="hljs-string">'test'</span>);

dataEntity.setMetadata(<span class="hljs-string">'touched'</span>, <span class="hljs-number">1</span>);
expect(dataEntity.getMetadata(<span class="hljs-string">'touched'</span>)).toBeNumber();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-setmetadata"></a><a href="#dataentity-setmetadata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;setMetadata</h3>
<p>Given a field and value set the metadata on the record. The field cannot be empty or <code>_createTime</code>.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity();

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    dataEntity.setMetadata(<span class="hljs-string">'_createTime'</span>);
}).toThrow();

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    dataEntity.setMetadata(<span class="hljs-string">''</span>);
}).toThrow();

dataEntity.setMetadata(<span class="hljs-string">'touched'</span>, <span class="hljs-number">1</span>);
expect(dataEntity.getMetadata(<span class="hljs-string">'touched'</span>)).toBeNumber();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getkey"></a><a href="#dataentity-getkey" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getKey</h3>
<p>Get the unique document <code>_key</code> from the metadata. If no <code>_key</code> is found, an error will be thrown. The key can be a <code>number</code> of <code>string</code>.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">new</span> DataEntity().getKey();
}).toThrow();

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'foo'</span>
});
expect(dataEntity.getKey()).toEqual(<span class="hljs-string">'foo'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-setkey"></a><a href="#dataentity-setkey" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;setKey</h3>
<p>Set the unique document <code>_key</code> from the metadata. If no <code>_key</code> is found, an error will be thrown</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">new</span> DataEntity().setKey({ <span class="hljs-attr">invalid</span>: <span class="hljs-string">'key'</span> });
}).toThrow();

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">new</span> DataEntity().setKey(<span class="hljs-literal">null</span>);
}).toThrow();

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'foo'</span>
});

dataEntity.setKey(<span class="hljs-string">'bar'</span>);
expect(dataEntity.getKey()).toEqual(<span class="hljs-string">'bar'</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getcreatetime"></a><a href="#dataentity-getcreatetime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getCreateTime</h3>
<p>Get the time at which this entity was created.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity();

expect(dataEntity.getCreateTime()).toBeDate();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getingesttime-dataentity-setingesttime"></a><a href="#dataentity-getingesttime-dataentity-setingesttime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getIngestTime / DataEntity-&gt;setIngestTime</h3>
<p>The time at which the data was ingested into the source data.</p>
<p><code>-&gt;getIngestTime</code>:</p>
<ul>
<li>If none is found, <code>undefined</code> will be returned.</li>
<li>If an invalid date is found, <code>false</code> will be returned.</li>
</ul>
<p><code>-&gt;setIngestTime</code>:</p>
<ul>
<li>If the value is empty it will set the time to now.</li>
<li>If an invalid date is given, an error will be thrown.</li>
</ul>
<p>Any date formated accepted by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#Parameters">JavaScript Date</a> can be used.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'foo'</span>
});

expect(dataEntity.getIngestTime()).toBe(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// if nothing is passed in it is set Date.now()</span>
dataEntity.setIngestTime();
<span class="hljs-comment">// use a date</span>
dataEntity.setIngestTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-comment">// use a ISO or JavaScript Date string</span>
dataEntity.setIngestTime(<span class="hljs-string">'2019-09-06T16:13:24.439Z'</span>);
<span class="hljs-comment">// use a UNIX epoch time</span>
dataEntity.setIngestTime(<span class="hljs-built_in">Date</span>.now() - <span class="hljs-number">1000</span>);

expect(dataEntity.getIngestTime()).toBeDate();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getprocesstime-dataentity-setprocesstime"></a><a href="#dataentity-getprocesstime-dataentity-setprocesstime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getProcessTime / DataEntity-&gt;setProcessTime</h3>
<p>The time at which the data was consumed by the reader.</p>
<p><code>-&gt;getProcessTime</code>:</p>
<ul>
<li>If none is found, <code>undefined</code> will be returned.</li>
<li>If an invalid date is found, <code>false</code> will be returned.</li>
</ul>
<p><code>-&gt;setProcessTime</code>:</p>
<ul>
<li>If the value is empty it will set the time to now.</li>
<li>If an invalid date is given, an error will be thrown.</li>
</ul>
<p>Any date formated accepted by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#Parameters">JavaScript Date</a> can be used.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'foo'</span>
});

expect(dataEntity.getProcessTime()).toBe(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// if nothing is passed in it is set Date.now()</span>
dataEntity.setProcessTime();
<span class="hljs-comment">// use a date</span>
dataEntity.setProcessTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-comment">// use a ISO or JavaScript Date string</span>
dataEntity.setProcessTime(<span class="hljs-string">'2019-09-06T16:13:24.439Z'</span>);
<span class="hljs-comment">// use a UNIX epoch time</span>
dataEntity.setProcessTime(<span class="hljs-built_in">Date</span>.now() - <span class="hljs-number">1000</span>);

expect(dataEntity.getProcessTime()).toBeDate();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-geteventtime-dataentity-seteventtime"></a><a href="#dataentity-geteventtime-dataentity-seteventtime" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getEventTime / DataEntity-&gt;setEventTime</h3>
<p>The time associated from a specific field on source data or message.</p>
<p><code>-&gt;getEventTime</code>:</p>
<ul>
<li>If none is found, <code>undefined</code> will be returned.</li>
<li>If an invalid date is found, <code>false</code> will be returned.</li>
</ul>
<p><code>-&gt;setEventTime</code>:</p>
<ul>
<li>If the value is empty it will set the time to now.</li>
<li>If an invalid date is given, an error will be thrown.</li>
</ul>
<p>Any date formated accepted by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#Parameters">JavaScript Date</a> can be used.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({}, {
    <span class="hljs-attr">_key</span>: <span class="hljs-string">'foo'</span>
});

expect(dataEntity.getEventTime()).toBe(<span class="hljs-literal">undefined</span>);

<span class="hljs-comment">// if nothing is passed in it is set Date.now()</span>
dataEntity.setEventTime();
<span class="hljs-comment">// use a date</span>
dataEntity.setEventTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());
<span class="hljs-comment">// use a ISO or JavaScript Date string</span>
dataEntity.setEventTime(<span class="hljs-string">'2019-09-06T16:13:24.439Z'</span>);
<span class="hljs-comment">// use a UNIX epoch time</span>
dataEntity.setEventTime(<span class="hljs-built_in">Date</span>.now() - <span class="hljs-number">1000</span>);

expect(dataEntity.getEventTime()).toBeDate();
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-getrawdata"></a><a href="#dataentity-getrawdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;getRawData</h3>
<p>Get the raw data, usually used for encoding type <code>raw</code>. If there is no data, an error will be thrown.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">new</span> DataEntity().getRawData();
}).toThrowError();

<span class="hljs-keyword">const</span> buf = Buffer.from(<span class="hljs-string">'foo:bar'</span>);
<span class="hljs-keyword">const</span> dataEntity = DataEntity.fromBuffer(buf, {
    <span class="hljs-attr">_encoding</span>: <span class="hljs-string">'raw'</span>
});

expect(dataEntity.getRawData()).toBe(buf);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-setrawdata"></a><a href="#dataentity-setrawdata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;setRawData</h3>
<p>Set the raw data, usually used for encoding type <code>raw</code>. If given <code>null</code>, it will unset the data.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity();

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    dataEntity.setRawData();
}).toThrowError();

expect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    dataEntity.setRawData({ <span class="hljs-attr">invalid</span>: <span class="hljs-string">'buffer'</span> });
}).toThrowError();

dataEntity.setRawData(Buffer.from(<span class="hljs-string">'test'</span>));
<span class="hljs-comment">// when given string it will convert it to a buffer</span>
dataEntity.setRawData(<span class="hljs-string">'test'</span>);

<span class="hljs-comment">// when given null it will unset the data</span>
dataEntity.setRawData(<span class="hljs-literal">null</span>);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="dataentity-tobuffer"></a><a href="#dataentity-tobuffer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DataEntity-&gt;toBuffer</h3>
<p>Convert the DataEntity to an encoded buffer.</p>
<pre><code class="hljs css language-js"><span class="hljs-meta">'use strict'</span>;

<span class="hljs-keyword">const</span> { DataEntity } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@terascope/utils'</span>);

<span class="hljs-keyword">const</span> dataEntity = <span class="hljs-keyword">new</span> DataEntity({
    <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>
});

dataEntity.toBuffer({
    <span class="hljs-comment">// this is the default</span>
    _encoding: <span class="hljs-string">'json'</span>
}); <span class="hljs-comment">// this should out put a buffer with {"foo":"bar"}</span>

dataEntity.setRawData(Buffer.from(<span class="hljs-string">'foo:bar'</span>))
dataEntity.toBuffer({
    <span class="hljs-attr">_encoding</span>: <span class="hljs-string">'raw'</span>
}); <span class="hljs-comment">// this should out put a buffer with 'foo:bar'</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="conventional-metadata"></a><a href="#conventional-metadata" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conventional Metadata</h2>
<p>As a convention we use the following metadata keys in many of our asset bundles</p>
<table>
<thead>
<tr><th>Key</th><th>Description</th><th>Type</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td><code>_createTime</code></td><td>The time at which this entity was created.</td><td><code>Unix Timestamp</code></td><td>readonly and automatically set.</td></tr>
<tr><td><code>_ingestTime</code></td><td>The time at which the data was ingested into the source data</td><td><code>Unix Timestamp</code></td><td>optional</td></tr>
<tr><td><code>_processTime</code></td><td>The time at which the data was consumed by the reader</td><td><code>Unix Timestamp</code></td><td>optional</td></tr>
<tr><td><code>_eventTime</code></td><td>The time associated with this data entity, usually off of a specific field on source data or message</td><td><code>Unix Timestamp</code></td><td>optional</td></tr>
<tr><td><code>_key</code></td><td>A unique key for the data which will be can be used to key the data</td><td>`String</td><td>Number`</td><td>optional</td></tr>
</tbody>
</table>
<p>Checkout <a href="https://github.com/terascope/teraslice/issues/950">this Github issue</a> for more details.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 9/23/2019</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/teraslice/docs/jobs/slices"><span class="arrow-prev">← </span><span>Slices</span></a><a class="docs-next button" href="/teraslice/docs/jobs/dead-letter-queue"><span>Dead Letter Queue</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#usage">Usage</a><ul class="toc-headings"><li><a href="#new-dataentity">new DataEntity</a></li><li><a href="#dataentitymake">DataEntity.make</a></li><li><a href="#dataentitymakearray">DataEntity.makeArray</a></li><li><a href="#dataentityfork">DataEntity.fork</a></li><li><a href="#dataentityfrombuffer">DataEntity.fromBuffer</a></li><li><a href="#dataentity-gt-getmetadata">DataEntity-&gt;getMetadata</a></li><li><a href="#dataentity-gt-setmetadata">DataEntity-&gt;setMetadata</a></li><li><a href="#dataentity-gt-getkey">DataEntity-&gt;getKey</a></li><li><a href="#dataentity-gt-setkey">DataEntity-&gt;setKey</a></li><li><a href="#dataentity-gt-getcreatetime">DataEntity-&gt;getCreateTime</a></li><li><a href="#dataentity-gt-getingesttime-dataentity-gt-setingesttime">DataEntity-&gt;getIngestTime / DataEntity-&gt;setIngestTime</a></li><li><a href="#dataentity-gt-getprocesstime-dataentity-gt-setprocesstime">DataEntity-&gt;getProcessTime / DataEntity-&gt;setProcessTime</a></li><li><a href="#dataentity-gt-geteventtime-dataentity-gt-seteventtime">DataEntity-&gt;getEventTime / DataEntity-&gt;setEventTime</a></li><li><a href="#dataentity-gt-getrawdata">DataEntity-&gt;getRawData</a></li><li><a href="#dataentity-gt-setrawdata">DataEntity-&gt;setRawData</a></li><li><a href="#dataentity-gt-tobuffer">DataEntity-&gt;toBuffer</a></li></ul></li><li><a href="#conventional-metadata">Conventional Metadata</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/teraslice/" class="nav-home"></a><div><h5>Docs</h5><a href="/teraslice/docs/en/getting-started.html">Getting Started</a><a href="/teraslice/docs/en/packages.html">Packages</a><a href="/teraslice/docs/en/asset-bundles.html">Asset Bundles</a></div><div><h5>More</h5><a href="/teraslice/blog">Blog</a><a href="https://github.com/terascope/teraslice">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/terascope/teraslice/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Terascope, LLC</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'b074b9b57bfd2e4d8b411aee052825d2',
                indexName: 'terascope_teraslice',
                inputSelector: '#search_input_react'
              });
            </script></body></html>